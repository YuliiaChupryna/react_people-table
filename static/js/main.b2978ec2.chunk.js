(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(37)},29:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),l=n.n(c),o=n(10),u=n(7),s=(n(29),n(13)),m=n.n(s),i=n(2),p=n(6),d=n(16),f=n(8),h=n.n(f),b=n(21),E=function(e){var t=e.name,n=e.sex;return r.a.createElement("span",{className:"m"===n?"person--man":"person--woman"},t)};E.defaultProps={name:""};var v=E,y=function(e){var t=e.titles,n=e.person,a=e.match,c=e.history,l=e.location;return r.a.createElement("tr",{className:h()("person","person--lived-in-".concat(n.century),{"person--selected":n.name.toLowerCase().split(" ").join("-")===a.params.personName}),onClick:function(){c.push({pathname:"/people/".concat(n.name.toLowerCase().split(" ").join("-")),search:l.search})}},t.map(function(e){switch(e){case"name":return r.a.createElement("td",{className:h()({"person--born-before-1650":n.born<1650},{"person--died-after-1800":n.died>1800})},r.a.createElement(v,{name:n.name,sex:n.sex}));case"sex":return r.a.createElement("td",{className:h()({"person--male":"m"===n.sex},{"person--female":"f"===n.sex})},n.sex);case"died":return r.a.createElement("td",null,n.died<1/0?n.died:"alive");case"age":return r.a.createElement("td",{className:h()({"person--old":n.age>=65})},n.age);case"mother":return r.a.createElement("td",null,""!==n.mother&&r.a.createElement(v,{name:n.mother,sex:"f"}));case"father":return r.a.createElement("td",null,""!==n.father&&r.a.createElement(v,{name:n.father,sex:"m"}));case"children":return r.a.createElement("td",null,n.children.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{name:e.name,sex:e.sex}),t!==n.children.length-1&&", ")}));default:return r.a.createElement("td",null,n[e])}}))},g=function(e){return fetch(e).then(function(e){return e.json()})},O=new Date,j=function(e){for(var t=e.currentPeople,n=e.addPerson,c=e.updateChildren,l=e.history,o=Object(a.useState)(""),u=Object(p.a)(o,2),s=u[0],m=u[1],d=Object(a.useState)(""),f=Object(p.a)(d,2),h=f[0],b=f[1],E=Object(a.useState)(""),v=Object(p.a)(E,2),y=v[0],g=v[1],j=Object(a.useState)(""),w=Object(p.a)(j,2),x=w[0],N=w[1],C=Object(a.useState)(""),_=Object(p.a)(C,2),k=_[0],S=_[1],q=Object(a.useState)(""),M=Object(p.a)(q,2),F=M[0],P=M[1],L={name:m,sex:b,born:g,died:N,mother:S,father:P},B=function(e,t){var n=e.target.value;L[t](n)},D=[],Y=Math.min.apply(Math,Object(i.a)(t.filter(function(e){return"f"===e.sex}).map(function(e){return e.born}))),A=Math.min.apply(Math,Object(i.a)(t.filter(function(e){return"m"===e.sex}).map(function(e){return e.born}))),U=Math.max(Y,A)+16;U<=O.getFullYear();U+=1)D.push(U);return r.a.createElement("form",{className:"new-person",onSubmit:function(e){e.preventDefault(),n(s.trim(),h,y,x,k,F),c(),m(""),b(h),g(""),N(""),S(""),P(""),l.push("/people")}},r.a.createElement("input",{type:"text",value:s,placeholder:"Enter name",onChange:function(e){var t=e.target.value;m(t.replace(/^ |[^a-zA-Z|\s]+/g,""))},className:"new-person__name",required:!0}),r.a.createElement("input",{type:"radio",name:"sex",value:"m",required:""===h,id:"male",onChange:function(e){return B(e,"sex")}}),r.a.createElement("label",{htmlFor:"male"},"male"),r.a.createElement("input",{type:"radio",name:"sex",value:"f",required:""===h,id:"female",onChange:function(e){return B(e,"sex")}}),r.a.createElement("label",{htmlFor:"female"},"female"),r.a.createElement("br",null),r.a.createElement("select",{value:y,onChange:function(e){return B(e,"born")},className:"new-person__year",required:!0},r.a.createElement("option",{value:""},"born"),D.map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("select",{value:x,onChange:function(e){return B(e,"died")},className:"new-person__year",required:!0},r.a.createElement("option",{value:""},"died"),y&&D.filter(function(e){return e>=Number(y)&&e<=Number(y)+149}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)}),O.getFullYear()-y<150&&r.a.createElement("option",{value:1/0},"alive")),r.a.createElement("br",null),r.a.createElement("select",{value:k,onChange:function(e){return B(e,"mother")},className:"new-person__parent",required:!0},r.a.createElement("option",{value:""},"Choose mother"),y&&t.filter(function(e){return"f"===e.sex&&e.died>=y&&e.born<=y-16}).map(function(e){return e.name}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("select",{value:F,onChange:function(e){return B(e,"father")},className:"new-person__parent",required:!0},r.a.createElement("option",{value:""},"Choose father"),y&&t.filter(function(e){return"m"===e.sex&&e.died>=y&&e.born<=y-16}).map(function(e){return e.name}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"new-person__submit"},"Add Person"))},w=new Date,x=function(e){return e.map(function(t,n){return Object(d.a)({},t,{children:e.filter(function(e){return e.father===t.name||e.mother===t.name}),age:t.died-t.born,century:Math.ceil(t.died/100),id:n+1})})},N=function(e){var t=e.match,n=e.history,c=e.location,l=Object(a.useState)([]),s=Object(p.a)(l,2),f=s[0],E=s[1];Object(a.useEffect)(function(){N()},[]);var v,O,N=function(){var e;return m.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(g("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:e=t.sent,E(Object(i.a)(x(e))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),E([]);case 10:case"end":return t.stop()}},null,null,[[0,7]])},C=function(e,t,n,a,r,c){E(function(l){return[].concat(Object(i.a)(l),[{name:e,sex:t,born:Number(n),died:Number(a),mother:r,father:c,children:l.filter(function(t){return t.father===e||t.mother===e}),age:a<1/0?a-n:w.getFullYear()-n,century:a<1/0?Math.ceil(a/100):Math.ceil(w.getFullYear()/100),id:Math.max.apply(Math,Object(i.a)(l.map(function(e){return e.id})))+1}])})},_=function(){E(function(e){return e.map(function(t){return Object(d.a)({},t,{children:e.filter(function(e){return e.father===t.name||e.mother===t.name})})})})},k=new URLSearchParams(c.search),S=function(e,t){return Object(i.a)(e).sort(function(e,n){return"string"===typeof e[t]?e[t].localeCompare(n[t]):e[t]-n[t]})},q=["id","name","sex","born","died","age","century","mother","father","children"],M=Object(i.a)((v=f,O=k.get("query")||"",v.filter(function(e){return e.name.toLowerCase().includes(O)||(e.father||"").toLowerCase().includes(O)||(e.mother||"").toLowerCase().includes(O)})));return M=k.get("sortBy")?Object(i.a)(function(e,t,n){return"desc"===n?Object(i.a)(S(e,t)).reverse():Object(i.a)(S(e,t))}(Object(i.a)(M),k.get("sortBy"),k.get("sortOrder")||"asc")):Object(i.a)(M),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/people/new",exact:!0,render:function(){return r.a.createElement(j,{currentPeople:f,addPerson:C,updateChildren:_,match:t,history:n,location:c})}}),r.a.createElement(u.a,{path:"/people/:personName?",exact:!0},r.a.createElement(o.b,{to:"/people/new",className:"people__link people__link--add"},"Add new person"))),"/people/new"!==t.url&&r.a.createElement("h3",null,"Currently visible people:"," ",M.length),"/people/new"!==t.url&&r.a.createElement(b.DebounceInput,{debounceTimeout:500,onChange:function(e){var t=e.target.value;""===t?k.delete("query"):k.set("query",t.toLowerCase()),n.push({search:k.toString()})},className:"people__search",type:"text",placeholder:"Search"}),"/people/new"!==t.url&&r.a.createElement("table",{className:"people-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,q.map(function(e){switch(e){case"mother":case"father":case"children":return r.a.createElement("th",{key:e},e.toUpperCase());default:return r.a.createElement("th",{key:e,className:h()("title--sortable",{"title--active":k.get("sortBy")===e}),onClick:function(){return t=e,k.get("sortBy")!==t?(k.set("sortBy",t),k.set("sortOrder","asc")):k.get("sortOrder")?k.set("sortOrder","asc"===k.get("sortOrder")?"desc":"asc"):k.set("sortOrder","desc"),void n.push({search:k.toString()});var t}},e.toUpperCase())}}))),r.a.createElement("tbody",null,M.map(function(e){return r.a.createElement(y,{key:e.id,titles:q,person:e,match:t,history:n,location:c})}))))},C=function(){return r.a.createElement("div",{className:"people"},r.a.createElement(o.b,{to:"/people",className:"people__link"},"People"),r.a.createElement(u.a,{path:"/people/:personName?",exact:!0,component:N}))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(C,{test:123})),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.b2978ec2.chunk.js.map