(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(37)},29:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);for(var n=a(0),r=a.n(n),c=a(20),o=a.n(c),l=a(10),u=a(6),s=(a(29),a(13)),m=a.n(s),i=a(9),p=a(5),d=a(16),h=a(7),f=a.n(h),E=a(21),b=function(e){var t=e.name,a=e.sex;return r.a.createElement("span",{className:"m"===a?"person--man":"person--woman"},t)},g=function(e){var t=e.titles,a=e.person,n=e.match,c=e.history,o=e.location;return r.a.createElement("tr",{className:f()("person","person--lived-in-".concat(a.century),{"person--selected":a.name.toLowerCase().split(" ").join("-")===n.params.personName}),onClick:function(){c.push({pathname:"/people/".concat(a.name.toLowerCase().split(" ").join("-")),search:o.search})}},t.map(function(e){switch(e){case"name":return r.a.createElement("td",{className:f()({"person--born-before-1650":a.born<1650},{"person--died-after-1800":a.died>1800})},r.a.createElement(b,{name:a.name,sex:a.sex}));case"sex":return r.a.createElement("td",{className:f()({"person--male":"m"===a.sex},{"person--female":"f"===a.sex})},a.sex);case"age":return r.a.createElement("td",{className:f()({"person--old":a.age>=65})},a.age);case"mother":return r.a.createElement("td",null,""!==a.mother&&r.a.createElement(b,{name:a.mother,sex:"f"}));case"father":return r.a.createElement("td",null,""!==a.father&&r.a.createElement(b,{name:a.father,sex:"m"}));case"children":return r.a.createElement("td",null,a.children.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{name:e.name,sex:e.sex}),t!==a.children.length-1&&", ")}));default:return r.a.createElement("td",null,a[e])}}))},v=function(e){return fetch(e).then(function(e){return e.json()})},y=new Date,O=[],w=1558;w<y.getFullYear();w+=1)O.push(w);var x=function(e){var t=e.history,a=e.peopleList,c=e.addPerson,o=e.updateChildren,l=Object(n.useState)(""),u=Object(p.a)(l,2),s=u[0],m=u[1],i=Object(n.useState)(""),d=Object(p.a)(i,2),h=d[0],f=d[1],E=Object(n.useState)(""),b=Object(p.a)(E,2),g=b[0],v=b[1],w=Object(n.useState)(""),x=Object(p.a)(w,2),j=x[0],C=x[1],N=Object(n.useState)(""),_=Object(p.a)(N,2),S=_[0],k=_[1],q=Object(n.useState)(""),L=Object(p.a)(q,2),F=L[0],B=L[1],M={name:m,sex:f,born:v,died:C,mother:k,father:B},P=function(e,t){var a=e.target.value;M[t](a)};return r.a.createElement("form",{className:"new-person",onSubmit:function(e){e.preventDefault(),c(s.trim(),h,g,j,S,F),o(),m(""),f(h),v(""),C(""),k(""),B(""),t.push("/people")}},r.a.createElement("input",{type:"text",value:s,placeholder:"Enter name",onChange:function(e){var t=e.target.value;m(t.replace(/^ |[^a-zA-Z|\s]+/g,""))},className:"new-person__name",required:!0}),r.a.createElement("input",{type:"radio",name:"sex",value:"m",required:""===h,id:"male",onChange:function(e){return P(e,"sex")}}),r.a.createElement("label",{htmlFor:"male"},"male"),r.a.createElement("input",{type:"radio",name:"sex",value:"f",required:""===h,id:"female",onChange:function(e){return P(e,"sex")}}),r.a.createElement("label",{htmlFor:"female"},"female"),r.a.createElement("br",null),r.a.createElement("select",{value:g,onChange:function(e){return P(e,"born")},className:"new-person__year",required:!0},r.a.createElement("option",{value:""},"born"),[].concat(O).map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("select",{value:j,onChange:function(e){return P(e,"died")},className:"new-person__year",required:!0},r.a.createElement("option",{value:""},"died"),g&&O.filter(function(e){return e>=Number(g)&&e<=Number(g)+149}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)}),y.getFullYear()-g<150&&r.a.createElement("option",{value:1/0},"alive")),r.a.createElement("br",null),r.a.createElement("select",{value:S,onChange:function(e){return P(e,"mother")},className:"new-person__parent",required:!0},r.a.createElement("option",{value:""},"Choose mother"),g&&a.filter(function(e){return"f"===e.sex&&e.died>=g&&e.born<=g-16}).map(function(e){return e.name}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("select",{value:F,onChange:function(e){return P(e,"father")},className:"new-person__parent",required:!0},r.a.createElement("option",{value:""},"Choose father"),g&&a.filter(function(e){return"m"===e.sex&&e.died>=g&&e.born<=g-16}).map(function(e){return e.name}).map(function(e){return r.a.createElement("option",{value:e,key:e},e)})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"new-person__submit"},"Add Person"))},j=new Date,C=function(e){return e.map(function(t,a){return Object(d.a)({},t,{children:e.filter(function(e){return e.father===t.name||e.mother===t.name}),age:t.died-t.born,century:Math.ceil(t.died/100),id:a+1})})},N=function(e){var t=e.match,a=e.history,c=e.location,o=Object(n.useState)([]),s=Object(p.a)(o,2),h=s[0],b=s[1];Object(n.useEffect)(function(){w()},[]);var y,O,w=function(){var e;return m.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(v("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:e=t.sent,b(Object(i.a)(C(e))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),b([]);case 10:case"end":return t.stop()}},null,null,[[0,7]])},N=new URLSearchParams(c.search),_=function(e,t){return e.sort(function(e,a){return"string"===typeof e[t]?e[t].localeCompare(a[t]):e[t]-a[t]})},S=function(e,t,a,n,r,c){b([].concat(Object(i.a)(h),[{name:e,sex:t,born:a,died:n,mother:r,father:c,children:h.filter(function(t){return t.father===e||t.mother===e}),age:n<1/0?n-a:j.getFullYear()-a,century:n<1/0?Math.ceil(n/100):Math.ceil(j.getFullYear()/100),id:Math.max.apply(Math,Object(i.a)(h.map(function(e){return e.id})))+1}]))},k=function(){b(h.map(function(e){return Object(d.a)({},e,{children:h.filter(function(t){return t.father===e.name||t.mother===e.name})})}))},q=["id","name","sex","born","died","age","century","mother","father","children"],L=(y=h,O=N.get("query")||"",y.filter(function(e){return e.name.toLowerCase().includes(O)||(e.father||"").toLowerCase().includes(O)||(e.mother||"").toLowerCase().includes(O)}));return L=N.get("sortBy")&&N.get("sortOrder")?function(e,t,a){return"desc"===a?Object(i.a)(_(e,t)).reverse():Object(i.a)(_(e,t))}(Object(i.a)(L),N.get("sortBy"),N.get("sortOrder")):L,r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/people/new",exact:!0,render:function(){return r.a.createElement(x,{addPerson:S,peopleList:h,updateChildren:k,match:t,history:a,location:c})}}),r.a.createElement(u.a,{path:"/people/:personName?",exact:!0},r.a.createElement(l.b,{to:"/people/new",className:"people__link"},"add"))),r.a.createElement("h3",null,"Currently visible people:"," ",L.length),r.a.createElement(E.DebounceInput,{debounceTimeout:500,onChange:function(e){var t=e.target.value;""===t?(N.delete("query"),a.push({search:N.toString()})):(N.set("query",t.toLowerCase()),a.push({search:N.toString()}))},className:"people__search",type:"text",placeholder:"Search"}),r.a.createElement("table",{className:"people-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,q.map(function(e){switch(e){case"mother":case"father":case"children":return r.a.createElement("th",null,e.toUpperCase());default:return r.a.createElement("th",{className:f()("title--sortable",{"title--active":N.get("sortBy")===e}),onClick:function(){return t=e,N.get("sortBy")&&N.get("sortOrder")&&t===N.get("sortBy")?"asc"===N.get("sortOrder")?N.set("sortOrder","desc"):N.set("sortOrder","asc"):(N.set("sortBy",t),N.set("sortOrder","asc")),void a.push({search:N.toString()});var t}},e.toUpperCase())}}))),r.a.createElement("tbody",null,L.map(function(e){return r.a.createElement(g,{key:e.id,titles:q,person:e,match:t,history:a,location:c})}))))},_=function(){return r.a.createElement("div",{className:"people"},r.a.createElement(l.b,{to:"/people",className:"people__link"},"People"),r.a.createElement(u.a,{path:"/people/:personName?",component:N}))};o.a.render(r.a.createElement(l.a,null,r.a.createElement(_,{test:123})),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.9f1dcbaf.chunk.js.map